---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';

const posts = (await getCollection('writing')).sort(
	(a, b) => b.data.date.valueOf() - a.data.date.valueOf()
);
---

<BaseLayout title="Writing â€” gnarlybob" description="Opinions on tech, culture, and the slow death of the open web.">
	<Header />
	<main class="writing-page">
		<div class="container">
			<header class="page-header">
				<p class="hud-text">// Writing</p>
				<h1 class="page-title"><span class="text-gradient">Writing</span></h1>
				<p class="page-description">
					Opinions on tech, culture, and whatever else lands.
				</p>
			</header>

			<div class="posts-list">
				{posts.map((post) => {
					const formattedDate = post.data.date.toLocaleDateString('en-US', {
						year: 'numeric',
						month: 'long',
						day: 'numeric',
					});
					return (
						<a href={`/writing/${post.id}/`} class="post-card hud-panel">
							<time class="post-date hud-text" datetime={post.data.date.toISOString()}>
								// {formattedDate}
							</time>
							<h2 class="post-title">{post.data.title}</h2>
							{post.data.description && (
								<p class="post-description">{post.data.description}</p>
							)}
						</a>
					);
				})}
			</div>
		</div>
	</main>
	<Footer />
</BaseLayout>

<style>
	.writing-page {
		padding-top: calc(var(--space-xl) + 60px);
		padding-bottom: var(--space-xl);
		min-height: 100vh;
	}

	.page-header {
		max-width: 720px;
		margin: 0 auto var(--space-lg);
	}

	.page-title {
		font-size: 3rem;
		margin-bottom: var(--space-sm);
	}

	.page-description {
		color: var(--color-text-muted);
		font-size: 1.125rem;
		line-height: 1.6;
		margin: 0;
	}

	.posts-list {
		max-width: 720px;
		margin: 0 auto;
		display: flex;
		flex-direction: column;
		gap: var(--space-sm);
	}

	.post-card {
		display: block;
		padding: var(--space-md);
		border-radius: var(--radius-md);
		transition: border-color 0.2s ease;
	}

	.post-card:hover {
		border-color: rgba(59, 130, 246, 0.5);
	}

	.post-card:hover .post-title {
		color: var(--color-accent);
	}

	.post-date {
		display: block;
		margin-bottom: var(--space-xs);
		font-size: 0.75rem;
	}

	.post-title {
		font-size: 1.5rem;
		margin-bottom: var(--space-xs);
		text-transform: none;
		letter-spacing: normal;
		transition: color 0.2s ease;
	}

	.post-description {
		color: var(--color-text-muted);
		font-size: 0.9375rem;
		line-height: 1.6;
		margin: 0;
	}

	@media (max-width: 768px) {
		.page-title {
			font-size: 2.5rem;
		}
	}
</style>
